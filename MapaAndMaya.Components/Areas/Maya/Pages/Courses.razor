@page "/maya/faculty/{FacultyId:int}/courses"
@layout MayaLayout
@using MapaAndMaya.Services;
@using MapaAndMaya.Services.Models



@inject SubjectInCourseService _SubjectInCourseService;
@inject FacultyService _FacultyService;
@inject NavigationManager _NavigationManager;


<RadzenCard>
    <RadzenRow>
        <RadzenText Text="@Title" TextStyle="TextStyle.H4" TagName="TagName.H1"/>
    </RadzenRow>
</RadzenCard>


<RadzenDataGrid @ref=_grid Data="@ItemsCollection" TItem="Course" AllowPaging="true" AllowColumnResize="true" style="box-shadow: var(--rz-shadow-5);"
                PageSize="10" PagerHorizontalAlign="HorizontalAlign.Left" IsLoading="@_isLoading"
                ShowPagingSummary="true" PagingSummaryFormat="Página {0} de {1} <b>(total {2} columnas)</b>" PageSizeOptions="@(new int[] { 5, 10, 20, 30 })"
                AllowFiltering="true" FilterMode="FilterMode.Advanced" FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
                LogicalFilterOperator="LogicalFilterOperator.And" FilterPopupRenderMode="PopupRenderMode.OnDemand"
                AllowSorting="true" ExpandMode="DataGridExpandMode.Multiple"
                Density="Density.Compact">
    <HeaderTemplate>

    </HeaderTemplate>
    <EmptyTemplate>
        <p style="color: lightgrey; font-size: 24px; text-align: center; margin: 2rem;">Nada que mostrar.</p>
    </EmptyTemplate>
    <Columns>
        <RadzenDataGridColumn TItem="Course" Property="Course.Degree.Name" Title="Carrera"/>
        <RadzenDataGridColumn TItem="Course" Property="Course.Modality.Name" Title="Modalidad" Sortable="true"/>
        <RadzenDataGridColumn TItem="Course" Property="Course.YearsNumber" Title="Duracion en años" Sortable="true"/>
        <RadzenDataGridColumn TItem="Course" Context="data" Filterable="false" Sortable="false" TextAlign="TextAlign.Center" Width="80px">
            <Template Context="data">
                <RadzenButton Icon="open_in_new" ButtonStyle="ButtonStyle.Danger" Variant="Variant.Flat" Size="ButtonSize.Medium"
                              Click="@(_ => _NavigationManager.NavigateTo($"/maya/course/{data.Id}/subjects"))" @onclick:stopPropagation="true">
                </RadzenButton>
            </Template>
        </RadzenDataGridColumn>
    </Columns>
</RadzenDataGrid>
